---
- set_fact:
     project_name: "regression-test"

- name: docker login with external registry from master node
  shell: " {{ item }}"
  delegate_to: "{{ groups.masters.0 if internal_registry_test_host == ' ' else internal_registry_test_host}}"
  with_items:
    - "oc login -u '{{oc_login.user_id}}' -p '{{oc_login_password}}' --insecure-skip-tls-verify --server={{oc_login.url}}"
    - "docker login -u '{{internal_registry.user_id}}' -e {{internal_registry.email}} -p $(oc whoami -t) {{internal_registry.url}}"
  register: docker_login


- debug: msg="{{item}}"
  with_items:
      - "{{ docker_login }}"       




