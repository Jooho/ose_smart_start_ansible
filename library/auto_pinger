#!/usr/bin/env python

import imp 
import sys
import socket
import logging
from datetime import datetime
from cpal.core.main import device
from subprocess import call

def main():
	module = AnsibleModule(
		argument_spec = dict(
			source_host=dict(required=True),
			remote_host=dict(required=True)
		),
		supports_check_mode = False
	)
	
	failed, twentyp, fortyp, sixtyp, eightyp, hundredp, unknown = 0,0,0,0,0,0,0


	target = module.params['remote_host']
	target_ip = socket.gethostbyname(target)

	source = module.params['source_host']
	src_ip = socket.gethostbyname(source)

        stream = subprocess.Popen("ping -c $s",target_ip, shell=true,stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
        for line in p.stdout.readlines():
        print line

	module.exit_json(response=results)
	
from ansible.module_utils.basic import *
main()
